<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package for Reading Environmental Data from Raw Formats into Dataframes • ingestr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R package for Reading Environmental Data from Raw Formats into Dataframes">
<meta property="og:description" content="This is an alpha work in progress initiated at the inaugural IMCR Hackathon. 
  The end product of this effort will be an R package on CRAN. The package will 
  primarily deal with reading data from files, though there will be some utilities 
  for initial cleanup of files such as removing blank rows and columns at the end 
  of a CSV file.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ingestr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jpshanno/ingestr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><img src="reference/figures/logo_ingestr.svg" align="right" width="150px"></p>
<div id="ingestr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ingestr" class="anchor"></a>ingestr</h1></div>
<p><strong>An R package for reading environmental data from raw formats into data.frames.</strong></p>
<p><a href="https://travis-ci.org/jpshanno/ingestr"><img src="https://travis-ci.org/jpshanno/ingestr.svg?branch=master" alt="Travis-CI Build Status"></a> <a href="https://ci.appveyor.com/project/jpshanno/ingestr"><img src="https://ci.appveyor.com/api/projects/status/github/jpshanno/ingestr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/jpshanno/ingestr?branch=master"><img src="https://img.shields.io/codecov/c/github/jpshanno/ingestr/master.svg" alt="Coverage Status"></a></p>
<p>This is project was initiated at the inaugural <a href="https://github.com/IMCR-Hackathon/HackathonCentral">IMCR Hackathon</a> hosted by the <a href="https://environmentaldatainitiative.org/">Environmental Data Institute</a>. The end product of this effort will be an R package on CRAN. The package will primarily deal with reading data from files, though there will be some utilities for initial cleanup of files such as removing blank rows and columns at the end of a CSV file. Our work at the hackathon focused on package infrastructure, standardization, and template construction.</p>
<p>The guiding principles of ingestr are that</p>
<ol style="list-style-type: decimal">
<li>All sources of environmental-related data should be easy to read directly</li>
<li>Reading in data should provide a standard output</li>
<li>Header information contained within sensor data files should be stored in a standard, easily readable format</li>
<li>Associating imported data with its original source is the first step towards good data provenance records and reproducibility</li>
<li>We don’t know about every common sensor and love contributions of code or sensors that need support. See <a href="https://github.com/jpshanno/ingestr/issues">issues</a> to submit an example data file, and see our <a href="https://github.com/jpshanno/ingestr/blob/master/CONTRIBUTING.html">contributing guide</a> to contribute code.</li>
</ol>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install ingestr from github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"jpshanno/ingestr"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># or from source</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">ingestr_source &lt;-<span class="st"> </span><span class="kw">tempfile</span>(<span class="dt">fileext =</span> <span class="st">".zip"</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">download.file</span>(<span class="st">"https://github.com/jpshanno/ingestr/archive/master.zip"</span>,</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">              ingestr_source)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw">install.packages</span>(ingestr_source, </a>
<a class="sourceLine" id="cb1-9" data-line-number="9">                 <span class="dt">repos =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">                 <span class="dt">type =</span> <span class="st">"source"</span>)</a></code></pre></div>
</div>
<div id="ingesting-data" class="section level2">
<h2 class="hasAnchor">
<a href="#ingesting-data" class="anchor"></a>Ingesting Data</h2>
<p>Each ingestr function to read in data starts with <code>ingest_</code> to make autocomplete easier. We are targetting any source of environmental data that returns data in a standard format: native sensor files, delimited outputs, HTML tables, PDF tables, Excel sheets, API returns, …</p>
<p>Running any ingest function will read in the data and format the data into a clean R data.frame. Column names are taken directly from the data file, and users have the option to read the header information into a temporary file that can then be loaded using <code><a href="reference/ingest_header.html">ingest_header()</a></code>.<br>
All data and header data that are read in will have the data source appended to the data as a column called input_source.</p>
<div id="sensor-and-instrument-data" class="section level3">
<h3 class="hasAnchor">
<a href="#sensor-and-instrument-data" class="anchor"></a>Sensor and Instrument Data</h3>
<p>Many sensors provide their output as delimited files with header information contained above the recorded data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">campbell_file &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">system.file</span>(<span class="st">"example_data"</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">              <span class="st">"campbell_scientific_tao5.dat"</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">              <span class="dt">package =</span> <span class="st">"ingestr"</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">campbell_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/ingest_campbell.html">ingest_campbell</a></span>(<span class="dt">input.source =</span> campbell_file,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">                  <span class="dt">export.header =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">                  <span class="dt">add.units =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">                  <span class="dt">add.measurements =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11"></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="kw">str</span>(campbell_data)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">campbell_header &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="reference/ingest_header.html">ingest_header</a></span>(<span class="dt">input.source =</span> campbell_file)</a>
<a class="sourceLine" id="cb2-16" data-line-number="16"></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="kw">str</span>(campbell_header)</a></code></pre></div>
</div>
<div id="formatted-non-sensor-data-sources" class="section level3">
<h3 class="hasAnchor">
<a href="#formatted-non-sensor-data-sources" class="anchor"></a>Formatted Non-Sensor Data Sources</h3>
<p>Some environmental data is published online as html elements. This data can be difficult to read directly from the websites where they are hosted into R. To facilitate access, we have created functions that parse the html so that this data can be directly downloaded in R. To track the provenance of these data, the column input_source is populated by the URL location from which the data were downloaded.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">PDO_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/ingest_PDO.html">ingest_PDO</a></span>(<span class="dt">input.source =</span> <span class="st">"http://jisao.washington.edu/pdo/PDO.latest"</span>,  </a>
<a class="sourceLine" id="cb3-4" data-line-number="4">             <span class="dt">end.year =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">             <span class="dt">export.header =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; Header info for http://jisao.washington.edu/pdo/PDO.latest has been saved to a temporary file. Run ingest_header('http://jisao.washington.edu/pdo/PDO.latest') to load the header data.</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw">str</span>(PDO_data)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 'data.frame':    119 obs. of  14 variables:</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  $ YEAR        : chr  "1901" "1902" "1903" "1904" ...</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  $ JAN         : chr  "0.79" "0.82" "0.86" "0.63" ...</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  $ FEB         : chr  "-0.12" "1.58" "-0.24" "-0.91" ...</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  $ MAR         : chr  "0.35" "0.48" "-0.22" "-0.71" ...</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  $ APR         : chr  "0.61" "1.37" "-0.50" "-0.07" ...</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  $ MAY         : chr  "-0.42" "1.09" "0.43" "-0.22" ...</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  $ JUN         : num  -0.05 0.52 0.23 -1.53 0.69 1.24 0.57 0.41 -0.64 -0.28 ...</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  $ JUL         : num  -0.6 1.58 0.4 -1.58 0.85 0.09 0.63 0.6 -0.39 0.03 ...</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  $ AUG         : num  -1.2 1.57 1.01 -0.64 1.26 -0.53 -0.96 -1.04 -0.68 -0.06 ...</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  $ SEP         : num  -0.33 0.44 -0.24 0.06 -0.03 -0.31 -0.23 -0.16 -0.89 0.4 ...</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  $ OCT         : num  0.16 0.7 0.18 0.43 -0.15 0.08 0.84 -0.41 -0.02 -0.66 ...</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;  $ NOV         : num  -0.6 0.16 0.08 1.45 1.11 1.69 0.66 0.47 -0.4 0.02 ...</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt;  $ DEC         : num  -0.14 -1.1 -0.03 0.06 -0.5 -0.54 0.72 1.16 -0.01 0.84 ...</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;  $ input_source: chr  "http://jisao.washington.edu/pdo/PDO.latest" "http://jisao.washington.edu/pdo/PDO.latest" "http://jisao.washington.edu/pdo/PDO.latest" "http://jisao.washington.edu/pdo/PDO.latest" ...</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"></a>
<a class="sourceLine" id="cb3-25" data-line-number="25">PDO_header &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="st">  </span><span class="kw"><a href="reference/ingest_header.html">ingest_header</a></span>(<span class="dt">input.source =</span> <span class="st">"http://jisao.washington.edu/pdo/PDO.latest"</span>)</a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; Header data was loaded from cached results created when http://jisao.washington.edu/pdo/PDO.latest was ingested previously in this R session.</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="kw">str</span>(PDO_header)</a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 'data.frame':    1 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt;  $ header_text : chr "PDO INDEX If the columns of the table appear without formatting on your browser, use http://research.jisao.wash"| __truncated__</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt;  $ input_source: chr "http://jisao.washington.edu/pdo/PDO.latest"</span></a></code></pre></div>
</div>
<div id="batch-ingests" class="section level3">
<h3 class="hasAnchor">
<a href="#batch-ingests" class="anchor"></a>Batch Ingests</h3>
<p>Sensor data stored in folders is available for batch import using <code>ingest_</code> functions, or any other function that reads in data (i.e. <code>read.csv</code>, <code><a href="http://www.rdocumentation.org/packages/readr/topics/read_delim">readr::read_csv</a></code>. When a directory is read in file names are checked for duplicates, and imported data is checked for duplicate file contents. The user is warned and can choose to suppress the warning or remove the duplicates. Parallel bath processing is supported for large batch processing (requires the <a href="https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf">parallel</a> package.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">temperature_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/ingest_directory.html">ingest_directory</a></span>(<span class="dt">directory =</span> <span class="st">"campbell_loggers"</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">                   <span class="dt">ingest.function =</span> ingest_campbell,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">                   <span class="dt">pattern =</span> <span class="st">".dat"</span>)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">temperature_data</a></code></pre></div>
</div>
<div id="incorporate-file-naming-conventions-as-data" class="section level3">
<h3 class="hasAnchor">
<a href="#incorporate-file-naming-conventions-as-data" class="anchor"></a>Incorporate File Naming Conventions as Data</h3>
<p>Filenames generally include information about the data collected: site, sensor, measurement type, date collected, etc. We are working on a generalized approach (probably just a function or two) that would split the filename into data columns using a template would be very useful.<br>
For example if a set of file names read as “site-variable-year” (152-soil_moisture-2017.csv, 152-soil_temperature-2017.csv, 140-soil_moisture_2017.csv, etc), then the function would take an argument supplying the template as column headers: “site-variable-year” with either delimiters or the length of each variable to enable splitting. These functions will likely build off of the great work done on <code><a href="https://tidyr.tidyverse.org/reference/separate.html">tidyr::separate()</a></code> and we suggest using that until we have incorporated a solution.</p>
</div>
</div>
<div id="preliminary-clean-up-utilities" class="section level2">
<h2 class="hasAnchor">
<a href="#preliminary-clean-up-utilities" class="anchor"></a>Preliminary Clean-up Utilities</h2>
<p>Basic data cleaning utilities will be included in ingestr. These will include identifying duplicate rows, empty rows, empty columns, and columns that contain suspicious entries (i.e. “.”). These utilities will be able to flag or correct the problems depending upon user preference. In keeping with our commitment to data provenance and reproduciblity all cleaning utilities will provide a record of identified and corrected issues which can be saved by the user and stored with the final dataset.</p>
</div>
<div id="qaqcr-quacker" class="section level2">
<h2 class="hasAnchor">
<a href="#qaqcr-quacker" class="anchor"></a>QAQCR (quacker)</h2>
<p>While ingestr is focused on getting data into R and running preliminary checks, another group at the IMCR Hackathon focused on quality assurance checks for environmental data. <a href="https://github.com/IMCR-Hackathon/qaqc_tools">qaqcr</a> provides a simple, standard way to apply the quality control checks that are applicable to your data.</p>
<p>The packages are the start of a larger ecosystem including <a href="https://github.com/EDIorg/EMLassemblyline">EMLassemblyline</a> for environmental data management to create a convenient, reproducible workflow moving from raw data to archived datasets with rich EML metadata.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jpshanno/ingestr">https://​github.com/​jpshanno/​ingestr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jpshanno/ingestr/issues">https://​github.com/​jpshanno/​ingestr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joe Shannon <br><small class="roles"> Author, maintainer </small>  </li>
<li>Rachael Blake <br><small class="roles"> Author </small>  </li>
<li>Tim Whiteaker <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joe Shannon, Rachael Blake, Tim Whiteaker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
